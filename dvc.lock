schema: '2.0'
stages:
  download_dataset:
    cmd: sh ./datasets/download_pix2pix_dataset.sh facades
    deps:
    - path: datasets/download_pix2pix_dataset.sh
      md5: c3ffc07c3bbde1fc36bfeab51c5a9eb8
      size: 981
    outs:
    - path: datasets/facades/
      md5: 0dfe70a3412b5a73917a2c6c74a72fb3.dir
      size: 31228725
      nfiles: 606
  download_weights:
    cmd: sh ./scripts/download_pix2pix_model.sh facades_label2photo
    deps:
    - path: scripts/download_pix2pix_model.sh
      md5: 3f926fd3fff89c4c234379ac1b4004fa
      size: 339
    outs:
    - path: checkpoints/facades_label2photo_pretrained/latest_net_G.pth
      md5: 1b43b05144a2e953156562c7c187a0e4
      size: 217704720
  load_params:
    cmd: python params.py
    deps:
    - path: params.py
      md5: 606fc8aac2f8d82fe9242ce1de258005
      size: 245
    outs:
    - path: .env
      md5: 86d12b6feedd7d97e45cca28a019c393
      size: 42
  train:
    cmd: source .env && python train.py --dataroot ./datasets/facades --name facades_pix2pix
      --model pix2pix --direction BtoA --n_epochs $n_epochs --save_epoch_freq $n_epochs
      --n_epochs_decay $n_epochs_decay --gpu_ids 0
    deps:
    - path: .env
      md5: 6ec1dd16b1bac4ebfaee1d92edf0f26e
      size: 46
    - path: checkpoints/facades_label2photo_pretrained/latest_net_G.pth
      md5: 1b43b05144a2e953156562c7c187a0e4
      size: 217704720
    - path: datasets/facades/
      md5: 0dfe70a3412b5a73917a2c6c74a72fb3.dir
      size: 31228725
      nfiles: 606
    params:
      params.yaml:
        n_epochs: 100
        n_epochs_decay: 100
    outs:
    - path: checkpoints/facades_pix2pix
      md5: c311e17f3eaf8ab5f6ed23d3940be4eb.dir
      size: 740127299
      nfiles: 609
  write_env:
    cmd: python write_env.py
    deps:
    - path: params.yaml
      md5: 5539da3dd71a4ef6c07ac87c873efc1e
      size: 34
    - path: write_env.py
      md5: d14aa0fca59cd9d02c28b98ea95b7c1a
      size: 241
    outs:
    - path: .env
      md5: 6ec1dd16b1bac4ebfaee1d92edf0f26e
      size: 46
      isexec: true
  test:
    cmd: python test.py --dataroot ./datasets/facades --model pix2pix --name facades_pix2pix
      --direction BtoA --gpu_ids 0
    deps:
    - path: checkpoints/facades_pix2pix
      md5: 9fee0c40d055fb571d26e8f8951e24d3.dir
      size: 740129691
      nfiles: 610
    outs:
    - path: results/facades_pix2pix/
      md5: b5cfb0d830a596a5828e7f3b35c513f8.dir
      size: 13641698
      nfiles: 151
  plot:
    cmd: python write_plots.py checkpoints/facades_pix2pix/loss_log.txt
    deps:
    - path: checkpoints/facades_pix2pix/loss_log.txt
      md5: 739ecd02fd2032b9aac8347d49b345de
      size: 84443
    outs:
    - path: loss.csv
      md5: dd19b89397774e7664f7e0a1eed8c7ff
      size: 29663
