schema: '2.0'
stages:
  download_dataset:
    cmd: sh ./datasets/download_pix2pix_dataset.sh facades
    deps:
    - path: datasets/download_pix2pix_dataset.sh
      md5: c3ffc07c3bbde1fc36bfeab51c5a9eb8
      size: 981
    outs:
    - path: datasets/facades/
      md5: 0dfe70a3412b5a73917a2c6c74a72fb3.dir
      size: 31228725
      nfiles: 606
  download_weights:
    cmd: sh ./scripts/download_pix2pix_model.sh facades_label2photo
    deps:
    - path: scripts/download_pix2pix_model.sh
      md5: 3f926fd3fff89c4c234379ac1b4004fa
      size: 339
    outs:
    - path: checkpoints/facades_label2photo_pretrained/latest_net_G.pth
      md5: 1b43b05144a2e953156562c7c187a0e4
      size: 217704720
  load_params:
    cmd: python params.py
    deps:
    - path: params.py
      md5: 606fc8aac2f8d82fe9242ce1de258005
      size: 245
    outs:
    - path: .env
      md5: 86d12b6feedd7d97e45cca28a019c393
      size: 42
  train:
    cmd: source .env && python train.py --dataroot ./datasets/facades --name facades_pix2pix
      --model pix2pix --n_epochs $n_epochs --save_epoch_freq $n_epochs --n_epochs_decay
      $n_epochs_decay --gpu_ids 0
    deps:
    - path: .env
      md5: ffc330375ad584c2425b0f18eee205e3
      size: 42
    - path: checkpoints/facades_label2photo_pretrained/latest_net_G.pth
      md5: 1b43b05144a2e953156562c7c187a0e4
      size: 217704720
    - path: datasets/facades/
      md5: 0dfe70a3412b5a73917a2c6c74a72fb3.dir
      size: 31228725
      nfiles: 606
    params:
      params.yaml:
        n_epochs: 5
        n_epochs_decay: 5
    outs:
    - path: checkpoints/facades_pix2pix
      md5: 6a9d351b9e235ef666f53ab4163cbe25.dir
      size: 689031497
      nfiles: 39
  write_env:
    cmd: python write_env.py
    deps:
    - path: params.yaml
      md5: c29dcaf744ed1c13e2db78da5f713221
      size: 30
    - path: write_env.py
      md5: d14aa0fca59cd9d02c28b98ea95b7c1a
      size: 231
    outs:
    - path: .env
      md5: ffc330375ad584c2425b0f18eee205e3
      size: 42
  test:
    cmd: python test.py --dataroot ./datasets/facades --model pix2pix --name facades_pix2pix
      --gpu_ids 0
    deps:
    - path: checkpoints/facades_pix2pix
      md5: 393c592c699130b071cf56d659c785b2.dir
      size: 689033873
      nfiles: 40
    outs:
    - path: results/facades_pix2pix/
      md5: 01d6aceb7972b3d32120ebcecf47a04c.dir
      size: 13338788
      nfiles: 151
  plot:
    cmd: python write_plots.py checkpoints/facades_pix2pix/loss_log.txt
    deps:
    - path: checkpoints/facades_pix2pix/loss_log.txt
      md5: dc7b7615897c8f867978e97315086aaf
      size: 4239
    outs:
    - path: loss.csv
      md5: b9abcb496ae11f4f9c29981155289155
      size: 1459
